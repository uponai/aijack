{% extends 'base.html' %}

{% block title %}{{ profession.get_seo_title }}{% endblock %}
{% block meta_description %}{{ profession.get_seo_description }}{% endblock %}

{% block extra_css %}
<!-- Context for Base SEO -->
{% with seo_title=profession.get_seo_title seo_description=profession.get_seo_description seo_image=profession.og_image|default:None canonical_url=profession.canonical_url %}
{% endwith %}
{% endblock %}

{% block schema %}
<script type="application/ld+json">
{{ profession.get_schema_json|safe }}
</script>
{% endblock %}

{% block content %}
<!-- Hero -->
<section class="py-16 relative overflow-hidden">
    <div class="absolute top-0 right-0 w-96 h-96 bg-brand-200 rounded-full filter blur-3xl opacity-30"></div>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative">
        <div class="max-w-3xl">
            <div class="flex items-center gap-3 mb-6">
                <a href="{% url 'professions' %}" class="text-brand-600 hover:underline font-medium">Professions</a>
                <span class="text-slate-400">/</span>
                <span class="text-slate-600">{{ profession.name }}</span>
            </div>

            <h1 class="text-4xl md:text-5xl font-heading font-black text-slate-900 mb-4 flex items-center gap-4">
                {% if profession.icon %}
                <span class="text-brand-600"><i class="{{ profession.icon }}"></i></span>
                {% endif %}
                <span>AI TOOLS FOR <span class="text-brand-600 glow-text">{{ profession.name|upper }}</span></span>
            </h1>

            {% if profession.hero_tagline %}
            <p class="text-xl text-slate-600 mb-6">{{ profession.hero_tagline }}</p>
            {% endif %}

            {% if profession.description %}
            <p class="text-slate-600">{{ profession.description }}</p>
            {% endif %}
        </div>
    </div>
</section>

<!-- Recommended Stacks -->
{% if stacks %}
<section class="py-8">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2 class="text-xl font-heading font-bold text-slate-900 mb-6">
            <span class="text-brand-600">RECOMMENDED</span> TOOLKIT STACKS
        </h2>

        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
            {% for stack in stacks %}
            {% include 'includes/_stack_card.html' with stack=stack compact=True %}
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<div class="neon-divider max-w-7xl mx-auto"></div>

<!-- Filters & Tools -->
<section class="py-8">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Filters -->
        <div class="flex flex-wrap items-center gap-4 mb-8">
            <span class="font-heading font-semibold text-slate-700">FILTER:</span>
            <a href="{% url 'profession_detail' profession.slug %}"
               class="profession-chip {% if not request.resolver_match.kwargs.pricing %}active{% endif %}">
                All ({{ counts.all }})
            </a>
            <a href="{% url 'profession_detail_filtered' profession.slug 'free' %}"
               class="profession-chip {% if request.resolver_match.kwargs.pricing == 'free' %}active{% endif %}">
                Free ({{ counts.free }})
            </a>
            <a href="{% url 'profession_detail_filtered' profession.slug 'freemium' %}"
               class="profession-chip {% if request.resolver_match.kwargs.pricing == 'freemium' %}active{% endif %}">
                Freemium ({{ counts.freemium }})
            </a>
            <a href="{% url 'profession_detail_filtered' profession.slug 'paid' %}"
               class="profession-chip {% if request.resolver_match.kwargs.pricing == 'paid' %}active{% endif %}">
                Paid ({{ counts.paid }})
            </a>
        </div>

        <!-- Tools Grid -->
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
            {% for tool in tools %}
            {% include 'includes/_tool_card.html' with tool=tool %}
            {% empty %}
            <div class="col-span-full text-center py-16">
                <div class="w-20 h-20 mx-auto mb-6 rounded-2xl bg-brand-100 flex items-center justify-center">
                    <svg class="w-10 h-10 text-brand-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                    </svg>
                </div>
                <h3 class="font-heading font-bold text-xl text-slate-900 mb-2">No Tools Found</h3>
                <p class="text-slate-600">No tools match your current filters.</p>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endblock %}