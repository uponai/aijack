{% extends 'base.html' %}

{% block title %}AI Tools for {{ profession.name }}{% endblock %}

{% block content %}
<!-- Hero -->
<section class="py-16 relative overflow-hidden">
    <div class="absolute top-0 right-0 w-96 h-96 bg-brand-200 rounded-full filter blur-3xl opacity-30"></div>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative">
        <div class="max-w-3xl">
            <div class="flex items-center gap-3 mb-6">
                <a href="{% url 'professions' %}" class="text-brand-600 hover:underline font-medium">Professions</a>
                <span class="text-slate-400">/</span>
                <span class="text-slate-600">{{ profession.name }}</span>
            </div>

            <h1 class="text-4xl md:text-5xl font-heading font-black text-slate-900 mb-4 flex items-center gap-4">
                {% if profession.icon %}
                <span class="text-brand-600"><i class="{{ profession.icon }}"></i></span>
                {% endif %}
                <span>AI TOOLS FOR <span class="text-brand-600 glow-text">{{ profession.name|upper }}</span></span>
            </h1>

            {% if profession.hero_tagline %}
            <p class="text-xl text-slate-600 mb-6">{{ profession.hero_tagline }}</p>
            {% endif %}

            {% if profession.description %}
            <p class="text-slate-600">{{ profession.description }}</p>
            {% endif %}
        </div>
    </div>
</section>

<!-- Recommended Stacks -->
{% if stacks %}
<section class="py-8">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2 class="text-xl font-heading font-bold text-slate-900 mb-6">
            <span class="text-brand-600">RECOMMENDED</span> TOOLKITS
        </h2>

        <div class="grid md:grid-cols-3 gap-6">
            {% for stack in stacks %}
            <a href="{% url 'stack_detail' stack.slug %}" class="stack-card group">
                <div class="flex items-center gap-2 mb-3">
                    <span class="neon-badge neon-badge-cyan">{{ stack.tools.count }} Tools</span>
                </div>
                <h3 class="font-heading font-bold text-lg text-slate-900 mb-2">{{ stack.name }}</h3>
                <p class="text-slate-600 text-sm">{{ stack.tagline }}</p>
            </a>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<div class="neon-divider max-w-7xl mx-auto"></div>

<!-- Filters & Tools -->
<section class="py-8">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Filters -->
        <div class="flex flex-wrap items-center gap-4 mb-8">
            <span class="font-heading font-semibold text-slate-700">FILTER:</span>
            <a href="{% url 'profession_detail' profession.slug %}"
               class="profession-chip {% if not request.resolver_match.kwargs.pricing %}active{% endif %}">
                All
            </a>
            <a href="{% url 'profession_detail_filtered' profession.slug 'free' %}"
               class="profession-chip {% if request.resolver_match.kwargs.pricing == 'free' %}active{% endif %}">
                Free
            </a>
            <a href="{% url 'profession_detail_filtered' profession.slug 'freemium' %}"
               class="profession-chip {% if request.resolver_match.kwargs.pricing == 'freemium' %}active{% endif %}">
                Freemium
            </a>
            <a href="{% url 'profession_detail_filtered' profession.slug 'paid' %}"
               class="profession-chip {% if request.resolver_match.kwargs.pricing == 'paid' %}active{% endif %}">
                Paid
            </a>
        </div>

        <!-- Tools Grid -->
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
            {% for tool in tools %}
            <a href="{% url 'tool_detail' tool.slug %}" class="tool-card {% if tool.is_featured %}featured{% endif %} group">
                <div class="flex items-start gap-4 mb-4">
                    {% if tool.logo %}
                    <img src="{{ tool.logo.url }}" alt="{{ tool.name }}" class="w-14 h-14 rounded-xl object-cover">
                    {% else %}
                    <div class="w-14 h-14 rounded-xl bg-gradient-to-br from-brand-500 to-brand-600 flex items-center justify-center text-white font-heading font-bold text-lg flex-shrink-0">
                        {{ tool.name|slice:":2"|upper }}
                    </div>
                    {% endif %}

                    <div class="flex-1 min-w-0">
                        <h3 class="font-heading font-bold text-lg text-slate-900 truncate">{{ tool.name }}</h3>
                        <span class="neon-badge neon-badge-{% if tool.pricing_type == 'free' %}green{% elif tool.pricing_type == 'freemium' %}yellow{% else %}magenta{% endif %}">
                            {{ tool.get_pricing_type_display }}
                        </span>
                    </div>
                </div>

                {% with translation=tool.get_translation %}
                {% if translation %}
                <p class="text-slate-600 mb-4 line-clamp-2">{{ translation.short_description }}</p>
                {% endif %}
                {% endwith %}

                <div class="flex flex-wrap gap-2">
                    {% for tag in tool.tags.all|slice:":3" %}
                    <span class="text-xs font-semibold text-brand-600 bg-brand-50 px-2 py-1 rounded">{{ tag.name }}</span>
                    {% endfor %}
                </div>
            </a>
            {% empty %}
            <div class="col-span-full text-center py-16">
                <div class="w-20 h-20 mx-auto mb-6 rounded-2xl bg-brand-100 flex items-center justify-center">
                    <svg class="w-10 h-10 text-brand-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                    </svg>
                </div>
                <h3 class="font-heading font-bold text-xl text-slate-900 mb-2">No Tools Found</h3>
                <p class="text-slate-600">No tools match your current filters.</p>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endblock %}