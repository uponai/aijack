<div x-data="{ open: false }"
     @open-report-modal.window="open = true"
     class="relative z-50"
     style="display: none;"
     x-show="open"
     x-init="$watch('open', value => { if(value) { $el.style.display = 'block' } else { setTimeout(() => $el.style.display = 'none', 300) } })">

    <!-- Backdrop -->
    <div x-show="open"
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="opacity-0"
         x-transition:enter-end="opacity-100"
         x-transition:leave="transition ease-in duration-200"
         x-transition:leave-start="opacity-100"
         x-transition:leave-end="opacity-0"
         class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm"
         @click="open = false"></div>

    <!-- Modal -->
    <div class="fixed inset-0 flex items-center justify-center p-4 selection:bg-brand-500/30">
        <div x-show="open"
             x-transition:enter="transition ease-out duration-300"
             x-transition:enter-start="opacity-0 scale-95 translate-y-4"
             x-transition:enter-end="opacity-100 scale-100 translate-y-0"
             x-transition:leave="transition ease-in duration-200"
             x-transition:leave-start="opacity-100 scale-100 translate-y-0"
             x-transition:leave-end="opacity-0 scale-95 translate-y-4"
             @click.outside="open = false"
             class="neon-card w-full max-w-lg bg-white p-0 overflow-hidden shadow-2xl relative">

            <!-- Header -->
            <div class="px-6 py-4 border-b border-brand-100 flex items-center justify-between bg-slate-50/50">
                <h3 class="text-lg font-heading font-bold text-slate-900 flex items-center gap-2">
                    <i class="fa-solid fa-flag text-brand-500"></i>
                    Report Issue
                </h3>
                <button @click="open = false" class="text-slate-400 hover:text-slate-600 transition-colors">
                    <i class="fa-solid fa-times text-lg"></i>
                </button>
            </div>

            <!-- Content -->
            <div class="p-6">
                <form hx-post="{% url 'report_tool' tool.slug %}" hx-swap="innerHTML" class="space-y-4">
                    {% csrf_token %}

                    <!-- Reason -->
                    <div>
                        <label class="block text-sm font-bold text-slate-700 mb-2">What's wrong?</label>
                        <div class="space-y-2">
                            <label class="flex items-center gap-3 p-3 rounded-lg border border-slate-200 hover:border-brand-300 hover:bg-brand-50/30 cursor-pointer transition-all">
                                <input type="radio" name="reason" value="broken_link" class="text-brand-600 focus:ring-brand-500" required>
                                <span class="text-slate-600 font-medium">Broken Link</span>
                            </label>
                            <label class="flex items-center gap-3 p-3 rounded-lg border border-slate-200 hover:border-brand-300 hover:bg-brand-50/30 cursor-pointer transition-all">
                                <input type="radio" name="reason" value="outdated" class="text-brand-600 focus:ring-brand-500">
                                <span class="text-slate-600 font-medium">Outdated Information</span>
                            </label>
                            <label class="flex items-center gap-3 p-3 rounded-lg border border-slate-200 hover:border-brand-300 hover:bg-brand-50/30 cursor-pointer transition-all">
                                <input type="radio" name="reason" value="inappropriate" class="text-brand-600 focus:ring-brand-500">
                                <span class="text-slate-600 font-medium">Inappropriate Content</span>
                            </label>
                            <label class="flex items-center gap-3 p-3 rounded-lg border border-slate-200 hover:border-brand-300 hover:bg-brand-50/30 cursor-pointer transition-all">
                                <input type="radio" name="reason" value="other" class="text-brand-600 focus:ring-brand-500">
                                <span class="text-slate-600 font-medium">Other</span>
                            </label>
                        </div>
                    </div>

                    <!-- Message -->
                    <div>
                        <label for="report-message" class="block text-sm font-bold text-slate-700 mb-2">
                            Details <span class="font-normal text-slate-400">(Optional)</span>
                        </label>
                        <textarea id="report-message" name="message" rows="3"
                                  class="w-full rounded-lg border-slate-300 focus:border-brand-500 focus:ring-brand-500 placeholder:text-slate-400"
                                  placeholder="Tell us a bit more..."></textarea>
                    </div>

                    <!-- Actions -->
                    <div class="flex justify-end gap-3 pt-2">
                        <button type="button" @click="open = false" class="px-4 py-2 rounded-lg font-heading font-semibold text-slate-500 hover:text-slate-700 hover:bg-slate-100 transition-colors">
                            Cancel
                        </button>
                        <button type="submit" class="neon-button px-6 py-2">
                            Submit Report
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>